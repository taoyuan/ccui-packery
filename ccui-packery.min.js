(function(t){"use strict";function e(){function t(e){for(var i in t.defaults)this[i]=t.defaults[i];for(i in e)this[i]=e[i]}return i.Rect=t,t.defaults={x:0,y:0,width:0,height:0},t.prototype.contains=function(t){var e=t.width||0,i=t.height||0;return this.x<=t.x&&this.y<=t.y&&this.x+this.width>=t.x+e&&this.y+this.height>=t.y+i},t.prototype.overlaps=function(t){var e=this.x+this.width,i=this.y+this.height,o=t.x+t.width,s=t.y+t.height;return o>this.x&&e>t.x&&s>this.y&&i>t.y},t.prototype.getMaximalFreeRects=function(e){if(!this.overlaps(e))return!1;var i,o=[],s=this.x+this.width,n=this.y+this.height,r=e.x+e.width,a=e.y+e.height;return this.y<e.y&&(i=new t({x:this.x,y:this.y,width:this.width,height:e.y-this.y}),o.push(i)),s>r&&(i=new t({x:r,y:this.y,width:s-r,height:this.height}),o.push(i)),n>a&&(i=new t({x:this.x,y:a,width:this.width,height:n-a}),o.push(i)),this.x<e.x&&(i=new t({x:this.x,y:this.y,width:e.x-this.x,height:this.height}),o.push(i)),o},t.prototype.canFit=function(t){return this.width>=t.width&&this.height>=t.height},t}var i=t.Packery=function(){};"function"==typeof define&&define.amd?define(e):(t.Packery=t.Packery||{},t.Packery.Rect=e())})(window),function(t){"use strict";function e(t){function e(t,e){this.width=t||0,this.height=e||0,this.reset()}return e.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var e=new t({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e)},e.prototype.pack=function(t){for(var e=0,i=this.spaces.length;i>e;e++){var o=this.spaces[e];if(o.canFit(t)){this.placeInSpace(t,o);break}}},e.prototype.placeInSpace=function(t,e){t.x=e.x,t.y=e.y,this.placed(t)},e.prototype.placed=function(t){for(var i=[],o=0,s=this.spaces.length;s>o;o++){var n=this.spaces[o],r=n.getMaximalFreeRects(t);r?i.push.apply(i,r):i.push(n)}this.spaces=i,e.mergeRects(this.spaces),this.spaces.sort(e.spaceSorterTopLeft)},e.mergeRects=function(t){for(var e=0,i=t.length;i>e;e++){var o=t[e];if(o){var s=t.slice(0);s.splice(e,1);for(var n=0,r=0,a=s.length;a>r;r++){var h=s[r],c=e>r?0:1;o.contains(h)&&(t.splice(r+c-n,1),n++)}}}return t},e.spaceSorterTopLeft=function(t,e){return t.y-e.y||t.x-e.x},e.spaceSorterLeftTop=function(t,e){return t.x-e.x||t.y-e.y},e}if("function"==typeof define&&define.amd)define(["./rect"],e);else{var i=t.Packery=t.Packery||{};i.Packer=e(i.Rect)}}(window),function(t){"use strict";function e(t,e,i){var o=t("transform"),s=function(){e.Item.apply(this,arguments)};s.prototype=new e.Item;var n=s.prototype._create;return s.prototype._create=function(){n.call(this),this.rect=new i,this.placeRect=new i},s.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&o&&(this.element.style[o]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},s.prototype.dragMove=function(t,e){this.didDrag=!0;var i=this.layout.size;t-=i.paddingLeft,e-=i.paddingTop,this.positionPlaceRect(t,e)},s.prototype.dragStop=function(){this.getPosition();var t=this.position.x!==this.placeRect.x,e=this.position.y!==this.placeRect.y;this.needsPositioning=t||e,this.didDrag=!1},s.prototype.positionPlaceRect=function(t,e,i){this.placeRect.x=this.getPlaceRectCoord(t,!0),this.placeRect.y=this.getPlaceRectCoord(e,!1,i)},s.prototype.getPlaceRectCoord=function(t,e,i){var o=e?"Width":"Height",s=this.size["outer"+o],n=this.layout[e?"columnWidth":"rowHeight"],r=this.layout.size["inner"+o];e||(r=Math.max(r,this.layout.maxY),this.layout.rowHeight||(r-=this.layout.gutter));var a;if(n){n+=this.layout.gutter,r+=e?this.layout.gutter:0,t=Math.round(t/n);var h=Math[e?"floor":"ceil"](r/n);h-=Math.ceil(s/n),a=h}else a=r-s;return t=i?t:Math.min(t,a),t*=n||1,Math.max(0,t)},s.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},s}"function"==typeof define&&define.amd?define(["get-style-property/get-style-property","outlayer/outlayer","./rect"],e):t.Packery.Item=e(t.getStyleProperty,t.Outlayer,t.Packery.Rect)}(window),function(t){"use strict";function e(t,e,i,o,s,n){var r=i.create("packery");return r.Item=r.prototype.settings.item=n,r.prototype._create=function(){i.prototype._create.call(this),this.packer=new s,this.stamp(this.options.stamped);var t=this;this.handleDraggabilly={dragStart:function(e){t.itemDragStart(e.element)},dragMove:function(e){t.itemDragMove(e.element,e.position.x,e.position.y)},dragEnd:function(e){t.itemDragEnd(e.element)}},this.handleUIDraggable={start:function(e){t.itemDragStart(e.currentTarget)},drag:function(e,i){t.itemDragMove(e.currentTarget,i.position.left,i.position.top)},stop:function(e){t.itemDragEnd(e.currentTarget)}}},r.prototype._resetLayout=function(){this.getSize(),this._getMeasurements(),this.packer.width=this.size.innerWidth+this.gutter,this.packer.height=Number.POSITIVE_INFINITY,this.packer.reset(),this.maxY=0},r.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},r.prototype._getItemLayoutPosition=function(t){return this._packItem(t),t.rect},r.prototype._packItem=function(t){this._setRectSize(t.element,t.rect),this.packer.pack(t.rect),this._setMaxY(t.rect)},r.prototype._setMaxY=function(t){this.maxY=Math.max(t.y+t.height,this.maxY)},r.prototype._setRectSize=function(t,i){var o=e(t),s=o.outerWidth,n=o.outerHeight,r=this.columnWidth+this.gutter,a=this.rowHeight+this.gutter;s=this.columnWidth?Math.ceil(s/r)*r:s+this.gutter,n=this.rowHeight?Math.ceil(n/a)*a:n+this.gutter,i.width=Math.min(s,this.packer.width),i.height=n},r.prototype._getContainerSize=function(){return{height:this.maxY-this.gutter}},r.prototype._manageStamp=function(t){var e,i=this.getItem(t);if(i&&i.isPlacing)e=i.placeRect;else{var s=this._getElementOffset(t);e=new o({x:this.options.isOriginLeft?s.left:s.right,y:this.options.isOriginTop?s.top:s.bottom})}this._setRectSize(t,e),this.packer.placed(e),this._setMaxY(e)},r.prototype.sortItemsByPosition=function(){this.items.sort(function(t,e){return t.position.y-e.position.y||t.position.x-e.position.x})},r.prototype.fit=function(t,e,i){var o=this.getItem(t);o&&(this._getMeasurements(),this.stamp(o.element),o.getSize(),o.isPlacing=!0,e=void 0===e?o.rect.x:e,i=void 0===i?o.rect.y:i,o.positionPlaceRect(e,i,!0),this._bindFitEvents(o),o.moveTo(o.placeRect.x,o.placeRect.y),this.layout(),this.unstamp(o.element),this.sortItemsByPosition(),o.isPlacing=!1,o.copyPlaceRectPosition())},r.prototype._bindFitEvents=function(t){function e(){o++,2===o&&i.emitEvent("fitComplete",[i,t])}var i=this,o=0;t.on("layout",function(){return e(),!0}),this.on("layoutComplete",function(){return e(),!0})},r.prototype.itemDragStart=function(t){this.stamp(t);var e=this.getItem(t);e&&e.dragStart()},r.prototype.itemDragMove=function(t,e,i){function o(){n.layout(),delete n.dragTimeout}var s=this.getItem(t);s&&s.dragMove(e,i);var n=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(o,40)},r.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},r.prototype.itemDragEnd=function(e){var i,o=this.getItem(e);if(o&&(i=o.didDrag,o.dragStop()),!o||!i&&!o.needsPositioning)return this.unstamp(e),void 0;t.add(o.element,"is-positioning-post-drag");var s=this._getDragEndLayoutComplete(e,o);o.needsPositioning?(o.on("layout",s),o.moveTo(o.placeRect.x,o.placeRect.y)):o&&o.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",s),this.layout()},r.prototype._getDragEndLayoutComplete=function(e,i){var o=i&&i.needsPositioning,s=0,n=o?2:1,r=this;return function(){return s++,s!==n?!0:(i&&(t.remove(i.element,"is-positioning-post-drag"),i.isPlacing=!1,i.copyPlaceRectPosition()),r.unstamp(e),r.sortItemsByPosition(),o&&r.emitEvent("dragItemPositioned",[r,i]),!0)}},r.prototype.bindDraggabillyEvents=function(t){t.on("dragStart",this.handleDraggabilly.dragStart),t.on("dragMove",this.handleDraggabilly.dragMove),t.on("dragEnd",this.handleDraggabilly.dragEnd)},r.prototype.bindUIDraggableEvents=function(t){t.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},r.Rect=o,r.Packer=s,r}"function"==typeof define&&define.amd?define(["classie/classie","get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],e):t.Packery=e(t.classie,t.getSize,t.Outlayer,t.Packery.Rect,t.Packery.Packer,t.Packery.Item)}(window);